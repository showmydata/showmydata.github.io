---
layout: post
title: "2022春-计网-第6讲"
categories: 
  - Courses
tags:
  - 课程学习
  - 计算机网络
last_modified_at: 2022-03-11T22:10:52+08:00u
---

##数据链路层服务

**数据链路层**

- 向下：利用物理层提供的位流服务
- 向上：向网络层提供明确的服务接口
- 数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报

**数据链路层功能**

- 负责结点-结点数据传输
- 组帧
- 物理寻址
- 流量控制
- 差错控制
- 访问控制

**组帧**

- 封装网络层数据报构成数据帧
- 帧同步：从物理层接收的比特流中准确区分出一帧的开始和结束
  - 字节计数法：帧头是该帧的字节数，计数字节出错则全乱套
  - 带字节填充的定界符发
    - 定界符：一个特殊字节，类似于magic number
    - 如果有效载荷部分包含与“定界符”相同的字节，则会出错，需设置前一个字节为转义字节
  - 带比特填充的定界符法
    - 定界符：如两个0比特之间，连续6个1比特，即01111110，0x7E
    - 若在有效载荷中出现连续5个1比特，则直接插入1个0比特
  - 物理层编码违例
    - 核心思想：定界符为不会在数据部分出现的码字，例如
    - 4B/5B编码方案：未使用的码字
    - 前导码：存在很长的前导码
    - 曼切斯特编码/差分曼切斯特编码：比特周期中间信号无跳变

**差错检测**

- 信号衰减和噪声会引起差错
- 差错编码

**差错纠正**

- 前向纠错：接收端直接纠正比特差错-纠错码
- 通知发送端重传

**链路接入**

- 若物理信道是共享介质，需要解决信道接入
- 帧首部中的MAC地址，用于标识帧的源和目的

**相邻结点间可靠交付**

- 在低误码率的有限链路上很少采用
- 无线链路：误码率高，需要可靠数据传输协议
  - 停-等协议
  - 滑动窗口协议

**流量控制**

- 协调相邻的发送结点和接收
- 避免接收端被数据“淹没”
- 解决方案
  - 基于反馈的流量控制
  - 基于速率的流量控制

**全双工和半双工通信控制**

- 全双工：链路两端结点同时双向传输
- 半双工：链路两端结点交替双向传输

**服务类型**

- 无连接服务
- 面向连接服务

**链路层的具体实现**

- 每个主机或路由器接口
- 链路层在“适配器”（即网络接口卡-NIC）中实现或者在一个芯片上实现
- 连接主机的系统总线
- 由硬件、软件与固件组成

**网卡间通信**

- 发送端：
  - 将数据报封装成帧
  - 增加差错检测比特，实现可靠数据传输和流量控制等
- 接收端：
  - 检测差错，实现可靠数据传输和流量控制等
  - 提取数据报，交付上层协议实体

---

## 差错检测与纠正

**汉明距离**

- 两个码字之间对应位不同的数目

**差错编码**

- 可分为检错码和纠错码
- 检错码
  - 如果编码集的汉明距离$d_s=r+1$，则该差错编码可以检测r位差错
- 纠错码
  - 如果编码集的汉明距离$d_s=2r+1$，则该差错编码可以纠正r位差错

**奇偶检验码**

- 1比特校验位：检测奇数位差错
- 二维奇偶校验：
  - 检测奇数位差错、部分偶数位差错
  - 纠正同一行/列的奇数位错

**Internet校验和（Checksum）**

- 发送端：
  - 将“数据”划分为16位的二进制“整数”序列
  - 求和（sum）：补码求和（最高位进位的“1”，返回最低位继续加）
  - 校验和（Checksum）：sum的反码
  - 放入分组（UDP、TCP、IP）的校验和字段
- 接收端
  - 与发送端相同算法计算
  - 计算得到的“Checksum”，为16位全0（或sum为16位全1）无错，否则有错

**循环冗余校验码（CRC）**

- 检错能力更强大的差错编码
- 将数据比特D视为一个二进制数
- 选择一个r+1位的比特模式（生成比特模式），G
- 目标：选择r位的CRC比特，R，满足
  - <D，R>刚好可以被G整除（模2）
  - 接收端检错：利用G除<D，R>，余式全0，无错；否则有错
  - 可以检测所有突发长度小于r+1位差错
- 广泛应用于实际网络
- $R=余式[\frac{D\cdot 2^r}{G}]$

