---
layout: post
title: "2022春-计网-第12讲"
categories: 
  - Courses
tags:
  - 课程学习
  - 计算机网络
last_modified_at: 2022-04-01T22:10:52+08:00u
---

#### IP编址

- IP分组
  - 源地址SA和目的地址DA
- 接口
  - 主机/路由器与物理链路的连接
  - 实现网络层功能
  - 路由器通常只有一个或两个接口
  - 主机通常只有一个或两个接口，有线的以太网接口，无限的802.11端口
- IP地址：32bit(IPv4)编号标识主机、路由器的接口
  - IP地址与每个接口关联

#### IP子网

- IP地址
  - 网络号(NetID)：高位比特
  - 主机号(HostID)：低位比特
- IP子网
  - IP地址具有相同网络号的设备接口
  - 不跨越路由器（第三及以上层网络设备）可以彼此物理连通的接口

- 比如223.1.1.1和223.1.1.2是同一子网
  - 而223.1.1.1与223.1.2.3不是同一子网
- “有类”编址
  - A类地址：0.0.0.0~127.255.255.255
    - 8位网络号，24位主机号
  - B类地址：128.0.0.0~191.255.255.255
    - 16位网络号，16位主机号
  - C类地址：192.0.0.0~223.255.255.255
    - 24位网络号，8位主机号
  - D类地址：224.0.0.0~239.255.255.255
    - 组播地址
  - E类地址：240.0.0.0~255.255.255.255
    - 未使用，科研用
- 特殊IP地址
  - NetID全0，HostID全0
    - 可作为源地址，不可作为目的地址
    - 在本网范围内表示本机；路由表中表示默认路由
  - NetID全0，HostID特定值
    - 不可作为源地址，可作为目的地址
    - 表示本网内某个特定主机
  - NetID全1，HostID全1
    - 不可作为源地址，可作为目的地址
    - 本网广播地址，路由器不转发
  - NetID特定值，HostID全0
    - 不可作为源地址，不可作为目的地址
    - 网络地址，表示一个网络
  - NetID特定值，HostID全1
    - 不可作为源地址，可作为目的地址
    - 直接广播地址，对特定网络上的所有主机进行广播
  - NetID为127，HostID非全0或非全1的任何数
    - 可作为源地址，可作为目的地址
    - 用于本地软件环回测试，称为环回地址
- 私有IP地址
  - A类：网络号10
  - B类：网络号172.16~172.31
  - C类：网络号192.168.0~192.168.255

#### 子网划分

- 区分一个IP子网更小范围网络（子网）

  - 网络号NetID-高位比特

  - 子网号SubID-原网络主机号部分比特
  - 主机号HostID-低位比特

- 子网掩码

  - 32位，点分十进制形式
  - 取值：NetID、SubID位全取1，HostID位全取0
  - 将IP分组的目的IP地址与子网掩码按位与运算，提取子网地址

#### CIDR(无类域间路由)

- 消除传统的A类、B类、C类地址界限
  - NetID+SubID-->Network Prefix(Prefix)可以任意长度
- 融合子网地址与子网掩码，方便子网划分
  - 无类地址格式：a.b.c.d/x，其中x为前缀长度
- 路由聚合
  - 提高IPv4地址空间分配效率
  - 提高路由效率
    - 将多个子网聚合为一个较大的子网
    - 构造超网
    - 路由聚合
  - 层级便至使得路由信息通告更高效
  - 选用更具体的路由：最长前缀匹配优先

#### IPv6

- 动机
  - 32位IPv4地址空间已分配殆尽
  - 快速处理/转发数据报
  - 支持QoS
- 数据报格式
  - 固定长度的40字节基本首部
  - 不允许分片
  - 扩展首部
  - 优先级8bit：标识数据报的优先级
  - 流标签20bit：标识同一“流”中的数据报
  - 下一个首部8bit：标识下一个选项首部或上层协议首部
  - 地址为128位
- 其它改变vs IPv4
  - 校验和：彻底移除，以减少每跳处理时间
  - 选项：允许，但是从基本首部移出，定义多个选项首部，通过"下一个首部"字段指示
  - ICMPv6：新版ICMP
    - 附加报文类型
    - 多播组管理功能
- IPv6地址表示形式
  - 一般：1080:0:FF:0:8:800:200C:417A
  - 压缩：FF01:0:0:0:0:0:0:43 -->FF01::43
  - IPv4-嵌入形式：0:0:0:0:0:FFFF:13.1.68.3或::FFFF:13.1.68.3
  - 地址前缀：2002:43c:476b::/48，不再使用掩码
  - URLs：http://[3FFE::1:800:200C:417C]:8000
- 基本地址类型
  - 单播unicast：一对一通信
  - 组播multicast：一对多通信
  - 任意播anycast：一对一组之一（最近一个）通信
- IPv4向IPv6过渡
  - 使用隧道tunneling，IPv6数据报作为IPv4数据报的载荷进行封装，穿越IPv4网络

